<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<title>Step02_Example.html</title>
	<link rel="stylesheet" href="css/bootstrap.css"/>
	<style>
		canvas{
			border: 1px solid red;
		}
	</style>
</head>
<body>
<canvas id="myCanvas" width="900" height="600"></canvas>

<script src="js/jquery-3.3.1.js"></script>
<script src="js/bootstrap.js"></script>
<script>
	//canvas 요소의 참조값 얻어오기
	var canvas=document.querySelector("#myCanvas");
	//canvas 에 렌더딩 할수 있는 객체의 참조값 얻어오기
	var context=canvas.getContext("2d");

	//이미지 로딩하기
	var rabbitImg=new Image(); //토끼 이미지
	var bmgImg=new Image(); //배경 이미지
	var snipeImg=new Image(); //스나이퍼 이미지
	var hole=new Image(); //총알 구멍 이미지
	
	rabbitImg.src="images/rabbit_1.png";
	bmgImg.src="images/background.jpg";
	snipeImg.src="images/snipe.png";
	hole.src="images/hole.png"
	
	//위치를 저장할 변수
	var rabbitX=250; //토끼 위치
	var rabbitY=250;
	var snipeX=250; //스나이퍼 위치
	var snipeY=250;

	bmgImg.onload=function(){
		context.drawImage(bmgImg, 0, 0, 900, 600); //배경
		context.drawImage(rabbitImg, rabbitX, rabbitY, 100, 130); //토끼
		
	};
	//0.01초 간격으로 이미지 화면에 표시하는 함수 실행할 Interval 설정
	setInterval(function(){
			context.clearRect(0, 0, 900, 600);
			//이미지 화면에 표시
			context.drawImage(snipeImg, snipeX-50, snipeY-50, 100, 100); //스나이퍼

		}, 
	10);



	//canvas위에 마우스가 오면 마우스의 좌표값을 해당 이미지의 위치를 저장한 변수에 전달
	$("#myCanvas").on("mousemove", function(e){
		//마우스 이벤트가 일어난 곳의 좌표를 그림의 좌표에 반영하기
		//스나이프
		snipeX=e.offsetX;
		snipeY=e.offsetY;
	});
	$("#myCanvas").on("click", function(e){
		context.clearRect(rabbitX, rabbitY, 100, 130);
	});

	
</script>	
</body>
</html>